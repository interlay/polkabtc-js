[@interlay/interbtc](/README.md) / [Exports](/modules.md) / RedeemAPI

# Interface: RedeemAPI

## Hierarchy

- [`TransactionAPI`](/interfaces/transactionapi.md)

  ↳ **`RedeemAPI`**

## Implemented by

- [`DefaultRedeemAPI`](/classes/defaultredeemapi.md)

## Table of contents

### Methods

- [burn](/interfaces/redeemapi.md#burn)
- [cancel](/interfaces/redeemapi.md#cancel)
- [execute](/interfaces/redeemapi.md#execute)
- [getAccount](/interfaces/redeemapi.md#getaccount)
- [getBurnExchangeRate](/interfaces/redeemapi.md#getburnexchangerate)
- [getCurrentInclusionFee](/interfaces/redeemapi.md#getcurrentinclusionfee)
- [getDustValue](/interfaces/redeemapi.md#getdustvalue)
- [getFeeRate](/interfaces/redeemapi.md#getfeerate)
- [getFeesToPay](/interfaces/redeemapi.md#getfeestopay)
- [getMaxBurnableTokens](/interfaces/redeemapi.md#getmaxburnabletokens)
- [getPremiumRedeemFee](/interfaces/redeemapi.md#getpremiumredeemfee)
- [getRedeemPeriod](/interfaces/redeemapi.md#getredeemperiod)
- [getRequestById](/interfaces/redeemapi.md#getrequestbyid)
- [getRequestsById](/interfaces/redeemapi.md#getrequestsbyid)
- [list](/interfaces/redeemapi.md#list)
- [mapForUser](/interfaces/redeemapi.md#mapforuser)
- [request](/interfaces/redeemapi.md#request)
- [requestAdvanced](/interfaces/redeemapi.md#requestadvanced)
- [sendLogged](/interfaces/redeemapi.md#sendlogged)
- [setAccount](/interfaces/redeemapi.md#setaccount)
- [setRedeemPeriod](/interfaces/redeemapi.md#setredeemperiod)
- [subscribeToRedeemExpiry](/interfaces/redeemapi.md#subscribetoredeemexpiry)

## Methods

### burn

▸ **burn**(`amount`): `Promise`<`void`\>

Burn wrapped tokens for a premium

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `amount` | `BTCAmount` | The amount of InterBTC to burn |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/redeem.ts:181](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L181)

___

### cancel

▸ **cancel**(`redeemId`, `reimburse?`): `Promise`<`void`\>

Send a redeem cancellation transaction. After the redeem period has elapsed,
the redeemal of InterBTC can be cancelled. As a result, the griefing collateral
of the vault will be slashed and sent to the redeemer

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `redeemId` | `string` | The ID returned by the redeem request transaction |
| `reimburse?` | `boolean` | (Optional) In case of redeem failure:  - (Default) `false` = retry redeeming, with a different Vault  - `true` = accept reimbursement in interBTC |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/redeem.ts:120](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L120)

___

### execute

▸ **execute**(`redeemId`, `txId?`, `merkleProof?`, `rawTx?`): `Promise`<`void`\>

Send a redeem execution transaction

**`remarks`** If `txId` is not set, the `merkleProof` and `rawTx` must both be set.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `redeemId` | `string` | The ID generated by the redeem request transaction |
| `txId?` | `string` | (Optional) The ID of the Bitcoin transaction that sends funds from the vault to the redeemer's address |
| `merkleProof?` | `Bytes` | (Optional) The merkle inclusion proof of the Bitcoin transaction. |
| `rawTx?` | `Bytes` | (Optional) The raw bytes of the Bitcoin transaction |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/redeem.ts:110](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L110)

___

### getAccount

▸ **getAccount**(): `undefined` \| `AddressOrPair`

#### Returns

`undefined` \| `AddressOrPair`

#### Inherited from

[TransactionAPI](/interfaces/transactionapi.md).[getAccount](/interfaces/transactionapi.md#getaccount)

#### Defined in

[src/parachain/transaction.ts:12](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/transaction.ts#L12)

___

### getBurnExchangeRate

▸ **getBurnExchangeRate**(): `Promise`<`ExchangeRate`<`Currency`<`Object`\>, `Object`, `Currency`<`Object`\>, `Object`\>\>

#### Returns

`Promise`<`ExchangeRate`<`Currency`<`Object`\>, `Object`, `Currency`<`Object`\>, `Object`\>\>

The exchange rate (collateral currency to wrapped token currency)
used when burning tokens

#### Defined in

[src/parachain/redeem.ts:190](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L190)

___

### getCurrentInclusionFee

▸ **getCurrentInclusionFee**(): `Promise`<`BTCAmount`\>

#### Returns

`Promise`<`BTCAmount`\>

The current inclusion fee based on the expected number of bytes
in the transaction, and the inclusion fee rate reported by the oracle

#### Defined in

[src/parachain/redeem.ts:195](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L195)

___

### getDustValue

▸ **getDustValue**(): `Promise`<`BTCAmount`\>

#### Returns

`Promise`<`BTCAmount`\>

The minimum amount of btc that is accepted for redeem requests; any lower values would
risk the bitcoin client to reject the payment

#### Defined in

[src/parachain/redeem.ts:161](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L161)

___

### getFeeRate

▸ **getFeeRate**(): `Promise`<`Big`\>

#### Returns

`Promise`<`Big`\>

The fee charged for redeeming. For instance, "0.005" stands for 0.5%

#### Defined in

[src/parachain/redeem.ts:165](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L165)

___

### getFeesToPay

▸ **getFeesToPay**(`amount`): `Promise`<`BTCAmount`\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `amount` | `BTCAmount` |

#### Returns

`Promise`<`BTCAmount`\>

The fees, in BTC

#### Defined in

[src/parachain/redeem.ts:170](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L170)

___

### getMaxBurnableTokens

▸ **getMaxBurnableTokens**(): `Promise`<`BTCAmount`\>

#### Returns

`Promise`<`BTCAmount`\>

The maximum amount of tokens that can be burned through a liquidation redeem

#### Defined in

[src/parachain/redeem.ts:185](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L185)

___

### getPremiumRedeemFee

▸ **getPremiumRedeemFee**(): `Promise`<`Big`\>

#### Returns

`Promise`<`Big`\>

If users execute a redeem with a Vault flagged for premium redeem,
they can earn a DOT premium, slashed from the Vault's collateral.
This value is a percentage of the redeemed amount.

#### Defined in

[src/parachain/redeem.ts:176](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L176)

___

### getRedeemPeriod

▸ **getRedeemPeriod**(): `Promise`<`number`\>

#### Returns

`Promise`<`number`\>

The time difference in number of blocks between a redeem request
is created and required completion time by a vault.
The redeem period has an upper limit to ensure the user gets their BTC in time
and to potentially punish a vault for inactivity or stealing BTC.

#### Defined in

[src/parachain/redeem.ts:136](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L136)

___

### getRequestById

▸ **getRequestById**(`redeemId`): `Promise`<[`Redeem`](/interfaces/redeem.md)\>

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `redeemId` | `string` \| `H256` | The ID of the redeem request to fetch |

#### Returns

`Promise`<[`Redeem`](/interfaces/redeem.md)\>

A redeem request object

#### Defined in

[src/parachain/redeem.ts:147](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L147)

___

### getRequestsById

▸ **getRequestsById**(`redeemIds`): `Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

#### Parameters

| Name | Type |
| :------ | :------ |
| `redeemIds` | (`string` \| `H256`)[] |

#### Returns

`Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

#### Defined in

[src/parachain/redeem.ts:148](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L148)

___

### list

▸ **list**(): `Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

#### Returns

`Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

An array containing the redeem requests

#### Defined in

[src/parachain/redeem.ts:65](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L65)

___

### mapForUser

▸ **mapForUser**(`account`): `Promise`<`Map`<`H256`, [`Redeem`](/interfaces/redeem.md)\>\>

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `account` | `AccountId` | The ID of the account whose redeem requests are to be retrieved |

#### Returns

`Promise`<`Map`<`H256`, [`Redeem`](/interfaces/redeem.md)\>\>

A mapping from the redeem request ID to the redeem request object, corresponding to the requests of
the given account

#### Defined in

[src/parachain/redeem.ts:142](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L142)

___

### request

▸ **request**(`amount`, `btcAddressEnc`, `vaultId?`, `atomic?`, `retries?`, `availableVaults?`): `Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

Send a redeem request transaction

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `amount` | `BTCAmount` | InterBTC amount to redeem |
| `btcAddressEnc` | `string` | Bitcoin address where the redeemed BTC should be sent |
| `vaultId?` | `AccountId` | (optional) ID of the vault to redeem with. |
| `atomic?` | `boolean` | (optional) Whether the request should be handled atomically or not. Only makes a difference if more than one vault is needed to fulfil it. Defaults to false. |
| `retries?` | `number` | (optional) Number of times to re-try redeeming, if some of the requests fail. Defaults to 0. |
| `availableVaults?` | `Map`<`AccountId`, `BTCAmount`\> | (optional) A list of all vaults usable for redeem. If not provided, will fetch from the parachain. |

#### Returns

`Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

An array of type {redeemId, redeemRequest} if the requests succeeded. The function throws an error otherwise.

#### Defined in

[src/parachain/redeem.ts:77](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L77)

___

### requestAdvanced

▸ **requestAdvanced**(`amountsPerVault`, `btcAddressEnc`, `atomic`): `Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

Send a batch of aggregated redeem transactions (to one or more vaults)

**`throws`** Rejects the promise if none of the requests succeeded (or if at least one failed, when atomic=true).

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `amountsPerVault` | `Map`<`AccountId`, `BTCAmount`\> | A mapping of vaults to redeem from, and InterBTC amounts (in Satoshi) to redeem using each vault |
| `btcAddressEnc` | `string` | Bitcoin address where the redeemed BTC should be sent |
| `atomic` | `boolean` | Whether the issue request should be handled atomically or not. Only makes a difference if more than one vault is needed to fulfil it. |

#### Returns

`Promise`<[`Redeem`](/interfaces/redeem.md)[]\>

An array of type {redeemId, vault} if the requests succeeded.

#### Defined in

[src/parachain/redeem.ts:95](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L95)

___

### sendLogged

▸ **sendLogged**<`T`\>(`transaction`, `successEventType?`): `Promise`<`ISubmittableResult`\>

#### Type parameters

| Name | Type |
| :------ | :------ |
| `T` | extends `Codec`[] |

#### Parameters

| Name | Type |
| :------ | :------ |
| `transaction` | `SubmittableExtrinsic`<``"promise"``, `ISubmittableResult`\> |
| `successEventType?` | `AugmentedEvent`<`ApiTypes`, `T`\> |

#### Returns

`Promise`<`ISubmittableResult`\>

#### Inherited from

[TransactionAPI](/interfaces/transactionapi.md).[sendLogged](/interfaces/transactionapi.md#sendlogged)

#### Defined in

[src/parachain/transaction.ts:13](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/transaction.ts#L13)

___

### setAccount

▸ **setAccount**(`account`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `account` | `AddressOrPair` |

#### Returns

`void`

#### Inherited from

[TransactionAPI](/interfaces/transactionapi.md).[setAccount](/interfaces/transactionapi.md#setaccount)

#### Defined in

[src/parachain/transaction.ts:11](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/transaction.ts#L11)

___

### setRedeemPeriod

▸ **setRedeemPeriod**(`blocks`): `Promise`<`void`\>

**`remarks`** Testnet utility function

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `blocks` | `number` | The time difference in number of blocks between a redeem request is created and required completion time by a vault. The redeem period has an upper limit to ensure the user gets their BTC in time and to potentially punish a vault for inactivity or stealing BTC. |

#### Returns

`Promise`<`void`\>

#### Defined in

[src/parachain/redeem.ts:128](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L128)

___

### subscribeToRedeemExpiry

▸ **subscribeToRedeemExpiry**(`account`, `callback`): `Promise`<`fn`\>

Whenever a redeem request associated with `account` expires, call the callback function with the
ID of the expired request. Already expired requests are stored in memory, so as not to call back
twice for the same request.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `account` | `AccountId` | The ID of the account whose redeem requests are to be checked for expiry |
| `callback` | (`requestRedeemId`: `H256`) => `void` | Function to be called whenever a redeem request expires |

#### Returns

`Promise`<`fn`\>

#### Defined in

[src/parachain/redeem.ts:156](https://github.com/interlay/interbtc-js/blob/0c8155e/src/parachain/redeem.ts#L156)
